function validateSearchTerm(n){return n.SearchTerm.value===""?!1:(n.submit(),!0)}function displaySearchSuggestions(n){var i="/api/searchsuggestions",t=this;return t.textBox=n,t.list=[],t.autoList=null,t.currentFocus=-1,t.exists=function(n){return n!==null&&n!==undefined&&n!==""?!0:!1},t.getSearchSuggestions=function(){if(t.exists(t.textBox.value)){var n=t.textBox.value;n=n.replace("#","");n=n.replace("&","");$.ajax({url:i,contentType:"application/json;charset=utf-8",data:{term:n},async:!1,success:function(n){for(var i=0;i<n.result.length;i++)t.list.push(n.result[i].term)}})}},t.clearAutoList=function(){var n=document.getElementById(t.textBox.id+"suggestionitems-div"),i;t.exists(n)&&(i=n.parentElement,i.removeChild(n),t.currentFocus=-1,t.list=[],t.autoList=null)},t.addActive=function(n){n&&t.exists(t.textBox.value)&&(t.removeActive(n),t.currentFocus>=n.length&&(t.currentFocus=0),t.currentFocus<0&&(t.currentFocus=n.length-1),n[t.currentFocus].firstElementChild.classList.add("autocomplete-active"),t.textBox.value=n[t.currentFocus].firstElementChild.value)},t.removeActive=function(n){for(var t=0;t<n.length;t++)n[t].firstElementChild.classList.remove("autocomplete-active")},t.onInput=function(){var n,i;if(t.clearAutoList(),t.textBox.value.length>1)for(t.getSearchSuggestions(),t.autoList=document.createElement("div"),t.autoList.setAttribute("id",t.textBox.id+"suggestionitems-div"),t.autoList.setAttribute("class",t.textBox.id+"suggestionitems-div"),t.textBox.parentNode.parentNode.appendChild(t.autoList),n=0;n<t.list.length;n++)i=document.createElement("div"),i.innerHTML+="<input class='"+t.textBox.id+"suggestionitem-input' id='"+t.textBox.id+"suggestionitem-input_"+n+"' value='"+t.list[n]+"' tabindex='-1'>",i.addEventListener("click",function(n){t.onClick(n)}),t.autoList.appendChild(i)},t.onKeyDown=function(n){if(t.exists(t.autoList)){var i=t.autoList.getElementsByTagName("div");switch(n.keyCode){case 40:t.currentFocus++;t.addActive(i);break;case 38:t.currentFocus--;t.addActive(i);break;case 13:t.exists(i)&&(t.textBox.value=i[t.currentFocus].firstElementChild.value,t.textBox.parentNode.submit());break;default:return}n.preventDefault();n.stopPropagation()}},t.onClick=function(n){t.textBox.value=n.target.value;t.clearAutoList();t.textBox.parentNode.submit()},t.init=function(){t.exists(t.textBox)&&(t.textBox.setAttribute("autocomplete","off"),t.textBox.addEventListener("input",function(){t.onInput()}),t.textBox.addEventListener("keydown",function(n){t.onKeyDown(n)}))},t.init(),t}function getXmlHttpRequestObject(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):!0}function setClientID(){var n=$(".header-desktop-div").is(":visible");n===!0?(searchClientID=searchtermclientid,searchSuggestClientID=searchsuggestionsclientid):(searchClientID=searchtermmobileclientid,searchSuggestClientID=searchsuggestionsmobileclientid)}function searchSuggest(){if(setClientID(),searchReq.readyState==4||searchReq.readyState==0){var n=document.getElementById(searchClientID).value;n=n.replace("#","");n=n.replace("&","");n=escape(n);n.length>1?(searchReq.open("GET",root+"/frames/searchsuggest.aspx?searchTerm="+n,!0),searchReq.onreadystatechange=handleSearchSuggest,searchReq.send(null)):suggestClear(document.getElementById(searchSuggestClientID),n)}}function handleSearchSuggest(){var t,r,n;if(searchReq.readyState==4)if(t=document.getElementById(searchSuggestClientID),t.innerHTML="",r!=""&&r!="none"){for(sgSelect=-1,r=searchReq.responseText.split("\n"),i=0;i<r.length-1;i++)n='<div onmouseover="javascript:sgSelect=-1;suggestOver(this);" ',n+='id="sg_'+i+'" ',n+='onmouseout="javascript:suggestOut(this);" ',n+='onclick="javascript:setSearch(this.innerHTML);" ',n+='class="suggest_link">',n+=r[i],n+="<\/div>",t.innerHTML+=n;sgSelectMax=i-1;t.className=i>0?"suggest_boxon":"suggest_boxoff"}else t.className="suggest_boxoff"}function suggestOver(n){n.className="suggest_link_over";sgOn=n.innerHTML}function suggestOut(n){n.className="suggest_link"}function setSearch(n){document.getElementById(searchClientID).value=n.replace(/^\s+|\s+$/g,"");document.getElementById(searchSuggestClientID).innerHTML="";suggestClear(document.getElementById(searchSuggestClientID),n);sgUsed=1;document.getElementById(searchClientID).focus();var t=$(".header-desktop-div").is(":visible");t?submitsearch():submitsearchmobile()}function suggestDown(){sgSelect<sgSelectMax?sgSelect++:sgSelect=0;suggestOver(document.getElementById("sg_"+sgSelect));document.getElementById(searchClientID).value=document.getElementById("sg_"+sgSelect).innerHTML.replace(/^\s+|\s+$/g,"");sgSelect>0?suggestOut(document.getElementById("sg_"+eval(sgSelect-1))):suggestOut(document.getElementById("sg_"+sgSelectMax));sgUsed=1}function suggestUp(){sgSelect==0||sgSelect==-1?(sgSelect=sgSelectMax,suggestOver(document.getElementById("sg_"+sgSelect)),document.getElementById(searchClientID).value=document.getElementById("sg_"+sgSelect).innerHTML.replace(/^\s+|\s+$/g,""),suggestOut(document.getElementById("sg_0"))):(sgSelect--,suggestOver(document.getElementById("sg_"+eval(sgSelect))),document.getElementById(searchClientID).value=document.getElementById("sg_"+eval(sgSelect)).innerHTML.replace(/^\s+|\s+$/g,""),suggestOut(document.getElementById("sg_"+eval(sgSelect+1))));sgUsed=1}function suggestClear(n,t){n&&n.value==""?n.value=t:sgOn!=""&&(n.value=sgOn);document.getElementById(searchSuggestClientID).innerHTML="";document.getElementById(searchSuggestClientID).className="suggest_boxoff";sgOn="";document.getElementById(searchClientID).focus()}var sgSelect=-1,sgSelectMax=0,sgUsed=0,sgOn="",searchClientID,searchSuggestClientID,searchReq=getXmlHttpRequestObject()